#!/usr/bin/env bash

source ./partitionscript

# Define partition paths (Adjust if using NVMe)
echo "Defining partition paths..."
BOOT_PART="${DISK}/dev/sda1" || { echo "Failed to define boot partition"; exit 1; } 
ROOT_PART="${DISK}/dev/sda2" || { echo "Failed to define root partition"; exit 1; } 

if [ "$swapyn" == "y" ]; then
    SWAP_PART="${DISK}/dev/sda3" || { echo "Failed to define swap partition"; exit 1; } 

echo "Success."

# Format partitions

if [ "$swapyn" == "y" ]; then
    mkswap "$SWAP_PART" || { echo "Failed to format swap partition"; exit 1; } 
fi

echo "Formating partitions..."
mkfs.fat -F 32 "$BOOT_PART"  || { echo "Failed to format boot partition"; exit 1; } 
mkfs.ext4 -F "$ROOT_PART"  || { echo "Failed to format root partition"; exit 1; } 
echo "Success."