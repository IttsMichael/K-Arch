#!/usr/bin/env bash

# Define the target drive
echo "Defining target device..."
DISK="/dev/sda"
echo "Success."

# 1. Create a new GPT partition table
echo "Creating partition table..."
parted -s "$DISK" mklabel gpt
echo "Success."

# 2. Create UEFI Boot Partition (1GiB)
echo "Creating UEFI Boot Partition (1GiB)..."
parted -s "$DISK" mkpart primary fat32 1MiB 1025MiB
parted -s "$DISK" set 1 esp on
echo "Success."

# 3. Create Swap Partition (4GB)
echo "Creating Swap Partition (4GB)..."
parted -s "$DISK" mkpart primary linux-swap 1025MiB 5121MiB
echo "Success."

# 4. Create Root Partition (Remaining space)
echo "Using the remaining space for root partiton.."
parted -s "$DISK" mkpart primary ext4 5121MiB 100%
echo "Success."
echo "Successfully created UEFI, swap and root partition."